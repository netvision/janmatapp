import{r as g,j as w,o as a,c as o,b as s,t as l,F as c,h as u,k,i as p,n as m}from"./index-d28b8463.js";const M={class:"container mx-auto px-4 py-8"},R={class:"max-w-7xl mx-auto"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},z={class:"bg-white rounded-lg shadow p-6"},S={class:"flex items-center"},B={class:"ml-4"},D={class:"text-2xl font-semibold text-gray-900"},V={class:"bg-white rounded-lg shadow p-6"},H={class:"flex items-center"},N={class:"ml-4"},T={class:"text-2xl font-semibold text-gray-900"},C={class:"bg-white rounded-lg shadow p-6"},E={class:"flex items-center"},F={class:"ml-4"},L={class:"text-2xl font-semibold text-gray-900"},O={key:0,class:"text-center py-8"},$={key:1,class:"space-y-8"},P={class:"p-6 border-b border-gray-200"},A={class:"text-xl font-semibold text-gray-900"},G={class:"text-sm text-gray-600 mt-1"},I={class:"p-6"},J={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},K={class:"font-medium text-gray-900 mb-3"},Q={key:0},U={key:0,class:"space-y-2"},W={class:"flex-1"},X={class:"flex justify-between text-sm"},Y={class:"text-gray-700"},Z={class:"text-gray-500"},q={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},ss={key:1,class:"text-gray-500 text-sm"},ts={key:1,class:"space-y-2"},es={class:"flex-1"},as={class:"flex justify-between text-sm"},os={class:"text-gray-700 truncate"},ls={class:"text-gray-500 ml-2"},ds={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},ns={key:2,class:"text-gray-500 text-sm"},rs={key:2,class:"text-center py-8"},us={__name:"Dashboard",setup(is){const h=g(!0),i=g({totalSurveys:0,totalResponses:0,todayResponses:0}),_=g([]),x=async()=>{var v,t,n;h.value=!0;try{const[e,d,r]=await Promise.all([p.get("/surveys"),p.get("/responses"),p.get("/responses/dashboard-analytics")]);i.value.totalSurveys=e.data.data.length,i.value.totalResponses=d.data.data.length;const y=new Date;y.setHours(0,0,0,0);const f=Math.floor(y.getTime()/1e3);i.value.todayResponses=d.data.data.filter(b=>b.created_at>=f).length,_.value=r.data.data}catch(e){console.error("Error fetching dashboard data:",((v=e.response)==null?void 0:v.data)||e.message),alert("Error loading dashboard data: "+(((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||e.message))}finally{h.value=!1}};return w(()=>{x()}),(v,t)=>(a(),o("div",M,[s("div",R,[t[8]||(t[8]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"Dashboard",-1)),s("div",j,[s("div",z,[s("div",S,[t[1]||(t[1]=s("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),s("div",B,[t[0]||(t[0]=s("p",{class:"text-sm font-medium text-gray-600"},"Total Surveys",-1)),s("p",D,l(i.value.totalSurveys),1)])])]),s("div",V,[s("div",H,[t[3]||(t[3]=s("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),s("div",N,[t[2]||(t[2]=s("p",{class:"text-sm font-medium text-gray-600"},"Total Responses",-1)),s("p",T,l(i.value.totalResponses),1)])])]),s("div",C,[s("div",E,[t[5]||(t[5]=s("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",F,[t[4]||(t[4]=s("p",{class:"text-sm font-medium text-gray-600"},"Today's Responses",-1)),s("p",L,l(i.value.todayResponses),1)])])])]),h.value?(a(),o("div",O,t[6]||(t[6]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),s("p",{class:"mt-4 text-gray-600"},"Loading analytics...",-1)]))):_.value.length>0?(a(),o("div",$,[(a(!0),o(c,null,u(_.value,n=>(a(),o("div",{key:n.survey_id,class:"bg-white rounded-lg shadow"},[s("div",P,[s("h2",A,l(n.survey_title),1),s("p",G,l(n.total_responses)+" total responses",1)]),s("div",I,[s("div",J,[(a(!0),o(c,null,u(n.questions,e=>(a(),o("div",{key:e.question_id,class:"border rounded-lg p-4"},[s("h3",K,l(e.question_text),1),e.question_type==="single_choice"||e.question_type==="multiple_choice"||e.question_type==="rating"?(a(),o("div",Q,[Object.keys(e.answers).length>0?(a(),o("div",U,[(a(!0),o(c,null,u(e.answers,(d,r)=>(a(),o("div",{key:r,class:"flex items-center"},[s("div",W,[s("div",X,[s("span",Y,l(r),1),s("span",Z,l(d),1)]),s("div",q,[s("div",{class:"bg-blue-600 h-2 rounded-full",style:m({width:`${d/e.total_answers*100}%`})},null,4)])])]))),128))])):(a(),o("div",ss,"No responses yet"))])):Object.keys(e.text_answers).length>0?(a(),o("div",ts,[(a(!0),o(c,null,u(e.text_answers,(d,r)=>(a(),o("div",{key:r,class:"flex items-center"},[s("div",es,[s("div",as,[s("span",os,l(r),1),s("span",ls,l(d),1)]),s("div",ds,[s("div",{class:"bg-green-600 h-2 rounded-full",style:m({width:`${d/e.total_answers*100}%`})},null,4)])])]))),128))])):(a(),o("div",ns,"No responses yet"))]))),128))])])]))),128))])):(a(),o("div",rs,t[7]||(t[7]=[k('<div class="text-gray-500"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><h3 class="mt-2 text-sm font-medium text-gray-900">No analytics available</h3><p class="mt-1 text-sm text-gray-500">Start collecting survey responses to see analytics here.</p></div>',1)])))])]))}};export{us as default};
