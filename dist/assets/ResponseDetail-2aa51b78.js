import{z as h,r as d,k as w,x as R,o as a,c as r,b as t,t as n,e as i,f as u,F as D,h as N,q as x,y as g,i as v}from"./index-b838ad82.js";import{f as V}from"./index-c4405eea.js";const M={key:0,class:"card"},A={key:1,class:"space-y-6"},B={class:"card"},C={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={class:"mt-1 text-sm text-gray-900"},S={class:"mt-1 text-sm text-gray-900"},$={class:"mt-1 text-sm text-gray-900"},q={class:"mt-1 text-sm text-gray-900"},F={key:0},T={class:"mt-1 text-sm text-gray-900"},I={key:0},L={key:1},j=["href"],H={key:1},P={class:"mt-1"},z=["src"],G={class:"card"},Q={class:"space-y-6"},Y={class:"mb-3"},J={class:"text-sm font-medium text-gray-900"},K={class:"text-xs text-gray-500"},O={class:"bg-gray-50 rounded-lg p-3"},U={class:"text-sm text-gray-900"},W={class:"flex justify-end"},X={key:2,class:"card"},Z={class:"text-center py-8"},ot={__name:"ResponseDetail",setup(tt){const c=h(),s=d(null),m=d([]),p=d(!0),_=o=>V(new Date(o*1e3),"MMM dd, yyyy HH:mm"),f=o=>({text:"Text Input",number:"Number Input",select:"Dropdown Selection",radio:"Single Choice",checkbox:"Multiple Choice"})[o]||o,b=o=>{console.error("Audio loading error:",o),alert("Error loading voice recording. Please try again later.")},k=async()=>{try{const o=await v.get(`/responses/${c.params.id}`);s.value=o.data.data;const e=await v.get(`/responses/${c.params.id}/answers`);m.value=e.data.data}catch(o){console.error("Error loading response:",o)}finally{p.value=!1}};return w(()=>{k()}),(o,e)=>{const y=R("router-link");return a(),r("div",null,[e[13]||(e[13]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Response Details"),t("p",{class:"text-gray-600"},"View survey response information")],-1)),p.value?(a(),r("div",M,e[0]||(e[0]=[t("div",{class:"text-center py-8"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),t("p",{class:"mt-2 text-gray-600"},"Loading response...")],-1)]))):s.value?(a(),r("div",A,[t("div",B,[e[8]||(e[8]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Response Information",-1)),t("div",C,[t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700"},"Survey",-1)),t("p",E,n(s.value.survey_title),1)]),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"Agent",-1)),t("p",S,n(s.value.agent_name),1)]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Respondent",-1)),t("p",$,n(s.value.respondent_name||"N/A"),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),t("p",q,n(_(s.value.created_at)),1)]),s.value.location_address||s.value.latitude&&s.value.longitude?(a(),r("div",F,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Location",-1)),t("p",T,[s.value.location_address?(a(),r("span",I,n(s.value.location_address),1)):(a(),r("span",L,n(s.value.latitude.toFixed(6))+", "+n(s.value.longitude.toFixed(6)),1))]),s.value.latitude&&s.value.longitude?(a(),r("a",{key:0,href:`https://maps.google.com/?q=${s.value.latitude},${s.value.longitude}`,target:"_blank",class:"text-primary-600 hover:text-primary-900 text-sm"}," View on Google Maps ",8,j)):i("",!0)])):i("",!0),s.value.has_voice_recording?(a(),r("div",H,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Voice Recording",-1)),t("div",P,[t("audio",{ref:"audioPlayer",controls:"",class:"w-full",onError:b},[t("source",{src:`https://janmat.netserve.in/${s.value.voice_recording}`,type:"audio/webm"},null,8,z),e[6]||(e[6]=u(" Your browser does not support the audio element. "))],544)])])):i("",!0)])]),t("div",G,[e[9]||(e[9]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Survey Answers",-1)),t("div",Q,[(a(!0),r(D,null,N(m.value,l=>(a(),r("div",{key:l.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",Y,[t("h4",J,n(l.question_text),1),t("p",K,n(f(l.question_type)),1)]),t("div",O,[t("p",U,n(l.answer_text||"No answer provided"),1)])]))),128))])]),t("div",W,[x(y,{to:"/responses",class:"btn-secondary"},{default:g(()=>e[10]||(e[10]=[u(" Back to Responses ")])),_:1,__:[10]})])])):(a(),r("div",X,[t("div",Z,[e[12]||(e[12]=t("p",{class:"text-gray-600"},"Response not found",-1)),x(y,{to:"/responses",class:"btn-primary mt-4"},{default:g(()=>e[11]||(e[11]=[u(" Back to Responses ")])),_:1,__:[11]})])]))])}}};export{ot as default};
