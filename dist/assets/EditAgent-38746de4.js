import{z as x,u as w,r as f,k as _,x as k,o as u,c as m,b as t,q as h,y as A,t as v,w as S,d as b,v as p,m as U,i as y,f as V}from"./index-b838ad82.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const B={name:"EditAgent",setup(){const i=x(),e=w(),l=f(!1),s=f(""),o=f({username:"",email:"",password:"",status:10}),c=async()=>{var a,r;l.value=!0,s.value="";try{const d=await y.get(`/agents/${i.params.id}`);if(d.data.success){const n=d.data.data;o.value.username=n.username,o.value.email=n.email,o.value.password="",o.value.status=n.status}else s.value=d.data.message||"Failed to load agent"}catch(d){s.value=((r=(a=d.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to load agent"}finally{l.value=!1}},g=async()=>{var a,r;l.value=!0,s.value="";try{const d={username:o.value.username,email:o.value.email,status:o.value.status};o.value.password.trim()&&(d.password=o.value.password);const n=await y.put(`/agents/${i.params.id}/update`,d);n.data.success?e.push("/agents"):s.value=n.data.message||"Failed to update agent"}catch(d){s.value=((r=(a=d.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to update agent"}finally{l.value=!1}};return _(()=>{c()}),{form:o,loading:l,error:s,handleSubmit:g}}},C={class:"container mx-auto px-4 py-8"},F={class:"max-w-2xl mx-auto"},M={class:"flex items-center justify-between mb-6"},N={key:0,class:"text-center py-8"},q={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6"},D={class:"mb-4"},j=["disabled"],R={class:"mb-4"},T=["disabled"],z={class:"mb-4"},I=["disabled"],L={class:"mb-6"},P=["disabled"],G={class:"flex justify-end space-x-4"},H=["disabled"],J=["disabled"];function K(i,e,l,s,o,c){const g=k("router-link");return u(),m("div",C,[t("div",F,[t("div",M,[e[7]||(e[7]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Agent",-1)),h(g,{to:"/agents",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors"},{default:A(()=>e[6]||(e[6]=[V(" Back to Agents ")])),_:1,__:[6]})]),s.loading?(u(),m("div",N,e[8]||(e[8]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading agent details...",-1)]))):s.error?(u(),m("div",q,v(s.error),1)):(u(),m("form",{key:2,onSubmit:e[5]||(e[5]=S((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"])),class:"bg-white shadow-md rounded-lg p-6"},[t("div",D,[e[9]||(e[9]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-2"}," Username ",-1)),b(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>s.form.username=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,j),[[p,s.form.username]])]),t("div",R,[e[10]||(e[10]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),b(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>s.form.email=a),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,T),[[p,s.form.email]])]),t("div",z,[e[12]||(e[12]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),b(t("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=a=>s.form.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},e[11]||(e[11]=[t("option",{value:"10"},"Active",-1),t("option",{value:"0"},"Inactive",-1)]),8,I),[[U,s.form.status]])]),t("div",L,[e[13]||(e[13]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password (leave blank to keep current) ",-1)),b(t("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>s.form.password=a),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,P),[[p,s.form.password]])]),t("div",G,[t("button",{type:"button",onClick:e[4]||(e[4]=a=>i.$router.push("/agents")),class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors",disabled:s.loading}," Cancel ",8,H),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",disabled:s.loading},v(s.loading?"Updating...":"Update Agent"),9,J)])],32))])])}const W=E(B,[["render",K]]);export{W as default};
