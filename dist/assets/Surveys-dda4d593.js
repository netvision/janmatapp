import{r as c,j as O,l as T,o,c as l,b as t,m as w,p as k,F as u,h as x,t as a,e as S,i as y,f as C,q as V,n as g}from"./index-d28b8463.js";import{f as F}from"./index-c4405eea.js";const I={class:"mb-8 flex justify-between items-center"},G={class:"card"},H={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},P={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},U={class:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Y=["onClick","disabled"],Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tt=["onClick","disabled"],et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ot=["onClick"],lt={key:0,class:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},at={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},nt={class:"flex justify-between items-center mb-4"},it={class:"text-lg font-bold text-gray-900"},rt={key:0,class:"text-center py-8"},dt={key:1,class:"space-y-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ut={class:"font-medium text-gray-900 mb-3 text-sm"},xt={key:0},_t={key:0,class:"space-y-2"},pt={class:"flex-1"},yt={class:"flex justify-between text-xs"},gt={class:"text-gray-700 truncate"},ht={class:"text-gray-500"},vt={class:"w-full bg-gray-200 rounded-full h-1.5 mt-1"},ft={key:1,class:"text-gray-500 text-xs"},mt={key:1,class:"space-y-2"},bt={class:"flex-1"},wt={class:"flex justify-between text-xs"},kt={class:"text-gray-700 truncate"},St={class:"text-gray-500"},Ct={class:"w-full bg-gray-200 rounded-full h-1.5 mt-1"},jt={key:2,class:"text-gray-500 text-xs"},Mt={key:2,class:"text-center py-8 text-gray-500"},$t={key:1,class:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},Nt={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},Qt={class:"flex justify-between items-center mb-4"},Dt={class:"text-lg font-bold text-gray-900"},Lt={key:0,class:"text-center py-8"},Rt={key:1,class:"space-y-6"},qt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Et={class:"bg-blue-50 rounded-lg p-4"},At={class:"text-2xl font-bold text-blue-600"},Bt={class:"bg-green-50 rounded-lg p-4"},zt={class:"text-2xl font-bold text-green-600"},Ot={class:"bg-purple-50 rounded-lg p-4"},Tt={class:"text-2xl font-bold text-purple-600"},Vt={key:0},Ft={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},It={class:"font-medium text-gray-900 mb-3"},Gt={key:0},Ht={key:0,class:"space-y-2"},Jt={class:"flex-1"},Kt={class:"flex justify-between text-sm"},Pt={class:"text-gray-700"},Ut={class:"text-gray-500"},Wt={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},Xt={key:1,class:"text-gray-500 text-sm"},Yt={key:1,class:"space-y-2"},Zt={class:"flex-1"},te={class:"flex justify-between text-sm"},ee={class:"text-gray-700 truncate"},se={class:"text-gray-500"},oe={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},le={key:2,class:"text-gray-500 text-sm"},ae={key:2,class:"text-center py-8 text-gray-500"},de={__name:"Surveys",setup(ne){const j=c([]),h=c(!1),v=c(!1),_=c(null),p=c(null),d=c(null),f=c(!1),m=c(!1),D=n=>{const e={0:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",1:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",2:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"};return e[n]||e[0]},L=n=>({0:"Draft",1:"Active",2:"Inactive"})[n]||"Draft",R=n=>F(new Date(n*1e3),"MMM dd, yyyy"),M=async()=>{try{const n=await y.get("/surveys");j.value=n.data.data}catch(n){console.error("Error loading surveys:",n)}},q=async n=>{if(n.questions_count!==0){_.value=n,h.value=!0,f.value=!0,p.value=null;try{const e=await y.get(`/responses/analytics?survey_id=${n.id}`);p.value=e.data.data}catch(e){console.error("Error loading question stats:",e)}finally{f.value=!1}}},E=async n=>{if(n.responses_count!==0){_.value=n,v.value=!0,m.value=!0,d.value=null;try{const e=await y.get(`/responses/analytics?survey_id=${n.id}`);d.value=e.data.data}catch(e){console.error("Error loading response stats:",e)}finally{m.value=!1}}},A=()=>{h.value=!1,_.value=null,p.value=null},B=()=>{v.value=!1,_.value=null,d.value=null},z=async n=>{if(confirm("Are you sure you want to delete this survey?"))try{await y.post(`/surveys/${n}/delete`),await M()}catch(e){console.error("Error deleting survey:",e)}};return O(()=>{M()}),(n,e)=>{var $,N,Q;const b=T("router-link");return o(),l("div",null,[t("div",I,[e[1]||(e[1]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Surveys"),t("p",{class:"text-gray-600"},"Manage your survey questionnaires")],-1)),w(b,{to:"/surveys/create",class:"btn-primary"},{default:k(()=>e[0]||(e[0]=[C(" Create Survey ")])),_:1,__:[0]})]),t("div",G,[t("div",H,[t("table",J,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Questions "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Responses "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",K,[(o(!0),l(u,null,x(j.value,s=>(o(),l("tr",{key:s.id},[t("td",P,a(s.title),1),t("td",U,a(s.description),1),t("td",W,[t("span",{class:V(D(s.status))},a(L(s.status)),3)]),t("td",X,[t("button",{onClick:i=>q(s),class:"text-blue-600 hover:text-blue-900 font-medium cursor-pointer",disabled:s.questions_count===0},a(s.questions_count||0),9,Y)]),t("td",Z,[t("button",{onClick:i=>E(s),class:"text-green-600 hover:text-green-900 font-medium cursor-pointer",disabled:s.responses_count===0},a(s.responses_count||0),9,tt)]),t("td",et,a(R(s.created_at)),1),t("td",st,[w(b,{to:`/surveys/${s.id}`,class:"text-primary-600 hover:text-primary-900 mr-3"},{default:k(()=>e[2]||(e[2]=[C(" Edit ")])),_:2,__:[2]},1032,["to"]),w(b,{to:`/surveys/${s.id}/questions`,class:"text-blue-600 hover:text-blue-900 mr-3"},{default:k(()=>e[3]||(e[3]=[C(" Manage Questions ")])),_:2,__:[3]},1032,["to"]),t("button",{onClick:i=>z(s.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,ot)])]))),128))])])])]),h.value?(o(),l("div",lt,[t("div",at,[t("div",nt,[t("h3",it,"Question Statistics: "+a(($=_.value)==null?void 0:$.title),1),t("button",{onClick:A,class:"text-gray-400 hover:text-gray-600"},e[5]||(e[5]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),f.value?(o(),l("div",rt,e[6]||(e[6]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading question statistics...",-1)]))):p.value?(o(),l("div",dt,[t("div",ct,[(o(!0),l(u,null,x(p.value.questions,s=>(o(),l("div",{key:s.question_id,class:"border rounded-lg p-4"},[t("h4",ut,a(s.question_text),1),s.question_type==="single_choice"||s.question_type==="multiple_choice"||s.question_type==="rating"?(o(),l("div",xt,[Object.keys(s.answers).length>0?(o(),l("div",_t,[(o(!0),l(u,null,x(s.answers,(i,r)=>(o(),l("div",{key:r,class:"flex items-center"},[t("div",pt,[t("div",yt,[t("span",gt,a(r),1),t("span",ht,a(i),1)]),t("div",vt,[t("div",{class:"bg-blue-600 h-1.5 rounded-full",style:g({width:`${i/s.total_answers*100}%`})},null,4)])])]))),128))])):(o(),l("div",ft,"No responses yet"))])):Object.keys(s.text_answers).length>0?(o(),l("div",mt,[(o(!0),l(u,null,x(s.text_answers,(i,r)=>(o(),l("div",{key:r,class:"flex items-center"},[t("div",bt,[t("div",wt,[t("span",kt,a(r),1),t("span",St,a(i),1)]),t("div",Ct,[t("div",{class:"bg-green-600 h-1.5 rounded-full",style:g({width:`${i/s.total_answers*100}%`})},null,4)])])]))),128))])):(o(),l("div",jt,"No responses yet"))]))),128))])])):(o(),l("div",Mt," No question statistics available "))])])):S("",!0),v.value?(o(),l("div",$t,[t("div",Nt,[t("div",Qt,[t("h3",Dt,"Response Statistics: "+a((N=_.value)==null?void 0:N.title),1),t("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},e[7]||(e[7]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),m.value?(o(),l("div",Lt,e[8]||(e[8]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading response statistics...",-1)]))):d.value?(o(),l("div",Rt,[t("div",qt,[t("div",Et,[e[9]||(e[9]=t("h4",{class:"text-sm font-medium text-blue-900"},"Total Responses",-1)),t("p",At,a(d.value.total_responses),1)]),t("div",Bt,[e[10]||(e[10]=t("h4",{class:"text-sm font-medium text-green-900"},"Questions Answered",-1)),t("p",zt,a(((Q=d.value.questions)==null?void 0:Q.length)||0),1)]),t("div",Ot,[e[11]||(e[11]=t("h4",{class:"text-sm font-medium text-purple-900"},"Completion Rate",-1)),t("p",Tt,a(d.value.total_responses>0?"100%":"0%"),1)])]),d.value.questions&&d.value.questions.length>0?(o(),l("div",Vt,[e[12]||(e[12]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Question Analytics",-1)),t("div",Ft,[(o(!0),l(u,null,x(d.value.questions,s=>(o(),l("div",{key:s.question_id,class:"border rounded-lg p-4"},[t("h5",It,a(s.question_text),1),s.question_type==="single_choice"||s.question_type==="multiple_choice"||s.question_type==="rating"?(o(),l("div",Gt,[Object.keys(s.answers).length>0?(o(),l("div",Ht,[(o(!0),l(u,null,x(s.answers,(i,r)=>(o(),l("div",{key:r,class:"flex items-center"},[t("div",Jt,[t("div",Kt,[t("span",Pt,a(r),1),t("span",Ut,a(i),1)]),t("div",Wt,[t("div",{class:"bg-blue-600 h-2 rounded-full",style:g({width:`${i/s.total_answers*100}%`})},null,4)])])]))),128))])):(o(),l("div",Xt,"No responses yet"))])):Object.keys(s.text_answers).length>0?(o(),l("div",Yt,[(o(!0),l(u,null,x(s.text_answers,(i,r)=>(o(),l("div",{key:r,class:"flex items-center"},[t("div",Zt,[t("div",te,[t("span",ee,a(r),1),t("span",se,a(i),1)]),t("div",oe,[t("div",{class:"bg-green-600 h-2 rounded-full",style:g({width:`${i/s.total_answers*100}%`})},null,4)])])]))),128))])):(o(),l("div",le,"No responses yet"))]))),128))])])):S("",!0)])):(o(),l("div",ae," No response statistics available "))])])):S("",!0)])}}};export{de as default};
