import{x,u as w,r as c,j as _,l as k,o as u,c as m,b as t,m as h,p as A,t as v,w as S,d as b,v as f,s as U,i as y,f as V}from"./index-d28b8463.js";const E=(n,e)=>{const d=n.__vccOpts||n;for(const[s,o]of e)d[s]=o;return d},B={name:"EditAgent",setup(){const n=x(),e=w(),d=c(!1),s=c(""),o=c({username:"",email:"",password:"",status:10}),p=async()=>{var a,i;d.value=!0,s.value="";try{const l=await y.get(`/agents/${n.params.id}`);if(l.data.success){const r=l.data.data;o.value.username=r.username,o.value.email=r.email,o.value.password="",o.value.status=r.status}else s.value=l.data.message||"Failed to load agent"}catch(l){s.value=((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to load agent"}finally{d.value=!1}},g=async()=>{var a,i;d.value=!0,s.value="";try{const l={username:o.value.username,email:o.value.email,status:o.value.status};o.value.password.trim()&&(l.password=o.value.password);const r=await y.put(`/agents/${n.params.id}/update`,l);r.data.success?e.push("/agents"):s.value=r.data.message||"Failed to update agent"}catch(l){s.value=((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to update agent"}finally{d.value=!1}};return _(()=>{p()}),{form:o,loading:d,error:s,handleSubmit:g}}},C={class:"container mx-auto px-4 py-8"},F={class:"max-w-2xl mx-auto"},M={class:"flex items-center justify-between mb-6"},N={key:0,class:"text-center py-8"},j={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6"},D={class:"mb-4"},q=["disabled"],R={class:"mb-4"},T=["disabled"],I={class:"mb-4"},L=["disabled"],O={class:"mb-6"},P=["disabled"],z={class:"flex justify-end space-x-4"},G=["disabled"],H=["disabled"];function J(n,e,d,s,o,p){const g=k("router-link");return u(),m("div",C,[t("div",F,[t("div",M,[e[7]||(e[7]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Agent",-1)),h(g,{to:"/agents",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors"},{default:A(()=>e[6]||(e[6]=[V(" Back to Agents ")])),_:1,__:[6]})]),s.loading?(u(),m("div",N,e[8]||(e[8]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading agent details...",-1)]))):s.error?(u(),m("div",j,v(s.error),1)):(u(),m("form",{key:2,onSubmit:e[5]||(e[5]=S((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"])),class:"bg-white shadow-md rounded-lg p-6"},[t("div",D,[e[9]||(e[9]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-2"}," Username ",-1)),b(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>s.form.username=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,q),[[f,s.form.username]])]),t("div",R,[e[10]||(e[10]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),b(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>s.form.email=a),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,T),[[f,s.form.email]])]),t("div",I,[e[12]||(e[12]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),b(t("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=a=>s.form.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},e[11]||(e[11]=[t("option",{value:"10"},"Active",-1),t("option",{value:"0"},"Inactive",-1)]),8,L),[[U,s.form.status]])]),t("div",O,[e[13]||(e[13]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password (leave blank to keep current) ",-1)),b(t("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>s.form.password=a),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s.loading},null,8,P),[[f,s.form.password]])]),t("div",z,[t("button",{type:"button",onClick:e[4]||(e[4]=a=>n.$router.push("/agents")),class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors",disabled:s.loading}," Cancel ",8,G),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",disabled:s.loading},v(s.loading?"Updating...":"Update Agent"),9,H)])],32))])])}const Q=E(B,[["render",J]]);export{Q as default};
