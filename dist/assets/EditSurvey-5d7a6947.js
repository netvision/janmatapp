import{u as w,x as E,r as n,j as _,l as D,o as u,c as d,b as e,d as p,v as c,s as V,m,p as f,t as B,w as M,i as x,f as b}from"./index-d28b8463.js";const U={key:0,class:"card"},q={key:1,class:"card"},j={class:"space-y-6"},C={class:"grid grid-cols-1 gap-6"},I={class:"flex justify-end space-x-3"},N=["disabled"],T={key:2,class:"card"},R={class:"text-center py-8"},L={__name:"EditSurvey",setup($){const g=w(),v=E(),l=n(null),y=n(!0),r=n(!1),s=n({title:"",description:"",status:"0",questions:[]}),S=async()=>{try{const o=await x.get(`/surveys/${v.params.id}`);l.value=o.data.data,s.value={title:l.value.title,description:l.value.description,status:l.value.status.toString(),questions:(l.value.questions||[]).map(t=>({text:t.text,type:t.type,required:t.required,options:t.options?t.options.join(`
`):""}))}}catch(o){console.error("Error loading survey:",o)}finally{y.value=!1}},k=async()=>{r.value=!0;try{const o=s.value.questions.map(a=>({text:a.text,type:a.type,required:a.required,options:a.options?a.options.split(`
`).filter(i=>i.trim()):[]})),t={title:s.value.title,description:s.value.description,status:parseInt(s.value.status),questions:o};await x.put(`/surveys/${v.params.id}/update`,t),g.push("/surveys")}catch(o){console.error("Error updating survey:",o)}finally{r.value=!1}};return _(()=>{S()}),(o,t)=>{const a=D("router-link");return u(),d("div",null,[t[12]||(t[12]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Survey"),e("p",{class:"text-gray-600"},"Modify survey questionnaire")],-1)),y.value?(u(),d("div",U,t[3]||(t[3]=[e("div",{class:"text-center py-8"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),e("p",{class:"mt-2 text-gray-600"},"Loading survey...")],-1)]))):l.value?(u(),d("div",q,[e("form",{onSubmit:M(k,["prevent"])},[e("div",j,[e("div",null,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),e("div",C,[e("div",null,[t[4]||(t[4]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"}," Survey Title ",-1)),p(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=i=>s.value.title=i),type:"text",required:"",class:"input-field",placeholder:"Enter survey title"},null,512),[[c,s.value.title]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=i=>s.value.description=i),rows:"3",class:"input-field",placeholder:"Enter survey description"},null,512),[[c,s.value.description]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),p(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=i=>s.value.status=i),class:"input-field"},t[6]||(t[6]=[e("option",{value:"0"},"Draft",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"2"},"Inactive",-1)]),512),[[V,s.value.status]])])])]),e("div",I,[m(a,{to:"/surveys",class:"btn-secondary"},{default:f(()=>t[9]||(t[9]=[b(" Cancel ")])),_:1,__:[9]}),e("button",{type:"submit",disabled:r.value,class:"btn-primary"},B(r.value?"Updating...":"Update Survey"),9,N)])])],32)])):(u(),d("div",T,[e("div",R,[t[11]||(t[11]=e("p",{class:"text-gray-600"},"Survey not found",-1)),m(a,{to:"/surveys",class:"btn-primary mt-4"},{default:f(()=>t[10]||(t[10]=[b(" Back to Surveys ")])),_:1,__:[10]})])]))])}}};export{L as default};
