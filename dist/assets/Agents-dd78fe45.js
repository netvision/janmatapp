import{r as c,k as V,x as j,o as n,c as r,b as t,q as h,y as f,F as b,h as w,t as l,n as x,e as k,i as y,f as C,s as B}from"./index-b838ad82.js";import{f as M}from"./index-c4405eea.js";const T={class:"mb-8 flex justify-between items-center"},z={class:"card"},F={class:"overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},O=["onClick"],Q=["onClick"],U={key:0,class:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},X={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},Y={key:0,class:"text-center py-8"},Z={key:1,class:"space-y-6"},tt={class:"bg-gray-50 rounded-lg p-4"},et={class:"font-semibold text-gray-900"},st={class:"text-sm text-gray-600"},at={class:"flex space-x-2"},ot={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},lt={class:"bg-blue-50 rounded-lg p-4"},nt={class:"text-2xl font-bold text-blue-900"},rt={class:"bg-green-50 rounded-lg p-4"},it={class:"text-2xl font-bold text-green-900"},dt={class:"text-sm text-green-600"},ct={class:"bg-purple-50 rounded-lg p-4"},ut={class:"text-2xl font-bold text-purple-900"},xt={class:"text-sm text-purple-600"},pt={class:"bg-orange-50 rounded-lg p-4"},mt={class:"text-2xl font-bold text-orange-900"},gt={key:0,class:"bg-white border rounded-lg p-4"},yt={class:"space-y-3"},vt={class:"w-24 text-sm text-gray-600"},_t={class:"flex-1 ml-4"},ht={class:"flex justify-between text-sm mb-1"},ft={class:"text-gray-700"},bt={class:"text-gray-500"},wt={class:"w-full bg-gray-200 rounded-full h-2"},kt={key:1,class:"text-center py-8 text-gray-500"},St={__name:"Agents",setup(Ct){const v=c([]),p=c(!1),m=c(!1),a=c(null),d=c(null),A=o=>{const e={0:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",10:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"};return e[o]||e[0]},S=o=>({0:"Inactive",10:"Active"})[o]||"Inactive",D=o=>M(new Date(o*1e3),"MMM dd, yyyy HH:mm"),$=o=>M(new Date(o),"MMM dd"),_=async()=>{try{const o=await y.get("/agents");v.value=o.data.data}catch(o){console.error("Error loading agents:",o)}},L=async o=>{if(confirm("Are you sure you want to delete this agent?"))try{await y.delete(`/agents/${o}/delete`),await _()}catch(e){console.error("Error deleting agent:",e)}},N=o=>{d.value=o,p.value=!0,u(o,"day")},E=()=>{p.value=!1,a.value=null,d.value=null},u=async(o,e)=>{m.value=!0;try{const i=await y.get(`/agents/${o}/stats?period=${e}`);a.value=i.data.data}catch(i){console.error("Error loading stats:",i),a.value=null}finally{m.value=!1}};return V(()=>{_()}),(o,e)=>{const i=j("router-link");return n(),r("div",null,[t("div",T,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Field Agents"),t("p",{class:"text-gray-600"},"Manage your field survey agents")],-1)),h(i,{to:"/agents/create",class:"btn-primary"},{default:f(()=>e[3]||(e[3]=[C(" Add Agent ")])),_:1,__:[3]})]),t("div",z,[t("div",F,[t("table",I,[e[6]||(e[6]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Surveys Completed "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Active "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",H,[(n(!0),r(b,null,w(v.value,s=>(n(),r("tr",{key:s.id},[t("td",W,l(s.name),1),t("td",q,l(s.email),1),t("td",P,l(s.phone),1),t("td",R,[t("span",{class:x(A(s.status))},l(S(s.status)),3)]),t("td",G,l(s.surveys_completed||0),1),t("td",J,l(s.last_active?D(s.last_active):"Never"),1),t("td",K,[h(i,{to:`/agents/${s.id}`,class:"text-primary-600 hover:text-primary-900 mr-3"},{default:f(()=>e[5]||(e[5]=[C(" Edit ")])),_:2,__:[5]},1032,["to"]),t("button",{onClick:g=>N(s.id),class:"text-green-600 hover:text-green-900 mr-3"}," View Stats ",8,O),t("button",{onClick:g=>L(s.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,Q)])]))),128))])])])]),p.value?(n(),r("div",U,[t("div",X,[t("div",{class:"flex justify-between items-center mb-6"},[e[8]||(e[8]=t("h3",{class:"text-lg font-bold"},"Agent Statistics",-1)),t("button",{onClick:E,class:"text-gray-500 hover:text-gray-700"},e[7]||(e[7]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),m.value?(n(),r("div",Y,e[9]||(e[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading statistics...",-1)]))):a.value?(n(),r("div",Z,[t("div",tt,[t("h4",et,l(a.value.agent.name),1),t("p",st,l(a.value.agent.email),1)]),t("div",at,[t("button",{onClick:e[0]||(e[0]=s=>u(d.value,"day")),class:x([a.value.period==="day"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-lg text-sm font-medium"])}," Today ",2),t("button",{onClick:e[1]||(e[1]=s=>u(d.value,"week")),class:x([a.value.period==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-lg text-sm font-medium"])}," Last 7 Days ",2),t("button",{onClick:e[2]||(e[2]=s=>u(d.value,"month")),class:x([a.value.period==="month"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-lg text-sm font-medium"])}," Last 30 Days ",2)]),t("div",ot,[t("div",lt,[e[10]||(e[10]=t("h5",{class:"text-sm font-medium text-blue-800"},"Total Responses",-1)),t("p",nt,l(a.value.summary.total_responses),1)]),t("div",rt,[e[11]||(e[11]=t("h5",{class:"text-sm font-medium text-green-800"},"With Voice",-1)),t("p",it,l(a.value.summary.total_with_voice),1),t("p",dt,l(a.value.summary.voice_percentage)+"%",1)]),t("div",ct,[e[12]||(e[12]=t("h5",{class:"text-sm font-medium text-purple-800"},"With Location",-1)),t("p",ut,l(a.value.summary.total_with_location),1),t("p",xt,l(a.value.summary.location_percentage)+"%",1)]),t("div",pt,[e[13]||(e[13]=t("h5",{class:"text-sm font-medium text-orange-800"},"Avg/Day",-1)),t("p",mt,l(a.value.daily_stats.length>0?Math.round(a.value.summary.total_responses/a.value.daily_stats.length):0),1)])]),a.value.daily_stats.length>0?(n(),r("div",gt,[e[14]||(e[14]=t("h5",{class:"font-semibold text-gray-900 mb-4"},"Daily Activity",-1)),t("div",yt,[(n(!0),r(b,null,w(a.value.daily_stats,s=>(n(),r("div",{key:s.date,class:"flex items-center"},[t("div",vt,l($(s.date)),1),t("div",_t,[t("div",ht,[t("span",ft,l(s.responses)+" responses",1),t("span",bt,l(s.with_voice)+" voice, "+l(s.with_location)+" location",1)]),t("div",wt,[t("div",{class:"bg-blue-600 h-2 rounded-full",style:B({width:`${Math.min(s.responses/Math.max(...a.value.daily_stats.map(g=>g.responses))*100,100)}%`})},null,4)])])]))),128))])])):(n(),r("div",kt," No activity data for this period "))])):k("",!0)])])):k("",!0)])}}};export{St as default};
