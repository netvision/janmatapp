import{_ as I,a as se}from"./index-ace43089.js";import{x as fe,u as ge,f as h,o as ye,a as f,c as g,b as l,n as be,t as G,m as ne,v as ae,p as A,q as Z,w as he,F as we,s as _e,y as xe,z as Pe,A as N}from"./vendor-740be9e2.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var J;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(J||(J={}));class re extends Error{constructor(e,s,a){super(e),this.message=e,this.code=s,this.data=a}}const Ee=t=>{var e,s;return t!=null&&t.androidBridge?"android":!((s=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},Ce=t=>{const e=t.CapacitorCustomPlatform||null,s=t.Capacitor||{},a=s.Plugins=s.Plugins||{},i=()=>e!==null?e.name:Ee(t),n=()=>i()!=="web",c=p=>{const m=x.get(p);return!!(m!=null&&m.platforms.has(i())||u(p))},u=p=>{var m;return(m=s.PluginHeaders)===null||m===void 0?void 0:m.find(O=>O.name===p)},d=p=>t.console.error(p),x=new Map,S=(p,m={})=>{const O=x.get(p);if(O)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),O.proxy;const w=i(),v=u(p);let E;const H=async()=>(!E&&w in m?E=typeof m[w]=="function"?E=await m[w]():E=m[w]:e!==null&&!E&&"web"in m&&(E=typeof m.web=="function"?E=await m.web():E=m.web),E),C=(_,P)=>{var R,j;if(v){const T=v==null?void 0:v.methods.find(k=>P===k.name);if(T)return T.rtype==="promise"?k=>s.nativePromise(p,P.toString(),k):(k,W)=>s.nativeCallback(p,P.toString(),k,W);if(_)return(R=_[P])===null||R===void 0?void 0:R.bind(_)}else{if(_)return(j=_[P])===null||j===void 0?void 0:j.bind(_);throw new re(`"${p}" plugin is not implemented on ${w}`,J.Unimplemented)}},q=_=>{let P;const R=(...j)=>{const T=H().then(k=>{const W=C(k,_);if(W){const z=W(...j);return P=z==null?void 0:z.remove,z}else throw new re(`"${p}.${_}()" is not implemented on ${w}`,J.Unimplemented)});return _==="addListener"&&(T.remove=async()=>P()),T};return R.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(R,"name",{value:_,writable:!1,configurable:!1}),R},$=q("addListener"),D=q("removeListener"),te=(_,P)=>{const R=$({eventName:_},P),j=async()=>{const k=await R;D({eventName:_,callbackId:k},P)},T=new Promise(k=>R.then(()=>k({remove:j})));return T.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await j()},T},B=new Proxy({},{get(_,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?te:$;case"removeListener":return D;default:return q(P)}}});return a[p]=B,x.set(p,{name:p,proxy:B,platforms:new Set([...Object.keys(m),...v?[w]:[]])}),B};return s.convertFileSrc||(s.convertFileSrc=p=>p),s.getPlatform=i,s.handleError=d,s.isNativePlatform=n,s.isPluginAvailable=c,s.registerPlugin=S,s.Exception=re,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},Le=t=>t.Capacitor=Ce(t),Y=Le(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),X=Y.registerPlugin;class de{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let a=!1;this.listeners[e]||(this.listeners[e]=[],a=!0),this.listeners[e].push(s);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),a&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,s);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s,a){const i=this.listeners[e];if(!i){if(a){let n=this.retainedEventArguments[e];n||(n=[]),n.push(s),this.retainedEventArguments[e]=n}return}i.forEach(n=>n(s))}hasListeners(e){var s;return!!(!((s=this.listeners[e])===null||s===void 0)&&s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:a=>{this.notifyListeners(s,a)}}}unimplemented(e="not implemented"){return new Y.Exception(e,J.Unimplemented)}unavailable(e="not available"){return new Y.Exception(e,J.Unavailable)}async removeListener(e,s){const a=this.listeners[e];if(!a)return;const i=a.indexOf(s);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach(a=>{this.notifyListeners(e,a)}))}}const ie=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),le=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ke extends de{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[i,n]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=le(i).trim(),n=le(n).trim(),s[i]=n}),s}async setCookie(e){try{const s=ie(e.key),a=ie(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${a||""}${i}; path=${n}; ${c};`}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}X("CapacitorCookies",{web:()=>new ke});const Ae=async t=>new Promise((e,s)=>{const a=new FileReader;a.onload=()=>{const i=a.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},a.onerror=i=>s(i),a.readAsDataURL(t)}),Re=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,n,c)=>(i[n]=t[e[c]],i),{})},Oe=(t,e=!0)=>t?Object.entries(t).reduce((a,i)=>{const[n,c]=i;let u,d;return Array.isArray(c)?(d="",c.forEach(x=>{u=e?encodeURIComponent(x):x,d+=`${n}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(c):c,d=`${n}=${u}`),`${a}&${d}`},"").substr(1):null,Te=(t,e={})=>{const s=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Re(t.headers)["content-type"]||"";if(typeof t.data=="string")s.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[c,u]of Object.entries(t.data||{}))n.set(c,u);s.body=n.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const n=new FormData;if(t.data instanceof FormData)t.data.forEach((u,d)=>{n.append(d,u)});else for(const u of Object.keys(t.data))n.append(u,t.data[u]);s.body=n;const c=new Headers(s.headers);c.delete("content-type"),s.headers=c}else(i.includes("application/json")||typeof t.data=="object")&&(s.body=JSON.stringify(t.data));return s};class Ue extends de{async request(e){const s=Te(e,e.webFetchExtra),a=Oe(e.params,e.shouldEncodeUrlParams),i=a?`${e.url}?${a}`:e.url,n=await fetch(i,s),c=n.headers.get("content-type")||"";let{responseType:u="text"}=n.ok?e:{};c.includes("application/json")&&(u="json");let d,x;switch(u){case"arraybuffer":case"blob":x=await n.blob(),d=await Ae(x);break;case"json":d=await n.json();break;case"document":case"text":default:d=await n.text()}const S={};return n.headers.forEach((p,m)=>{S[m]=p}),{data:d,headers:S,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}X("CapacitorHttp",{web:()=>new Ue});function je(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return new Proxy({},{get(a,i){return(n,c,u)=>{const d=t.Capacitor.Plugins[s];if(d===void 0){u(new Error(`Capacitor plugin ${s} not found`));return}if(typeof d[i]!="function"){u(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const x=await d[i](n);c(x)}catch(x){u(x)}})()}}})}})}function Se(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return t.cordova.plugins[s]}})}function pe(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?je(window):window.cordova!==void 0&&Se(window))}const oe=X("Geolocation",{web:()=>I(()=>import("./web-ea5b3329.js"),["assets/web-ea5b3329.js","assets/index-ace43089.js","assets/vendor-740be9e2.js","assets/utils-917b1704.js","assets/index-c62130d4.css"]).then(t=>new t.GeolocationWeb)});pe();async function ce(){if(Y.isNativePlatform())try{const t=await oe.getCurrentPosition();return{latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,source:"capacitor"}}catch(t){console.warn("Capacitor Geolocation failed, falling back to browser:",t)}if("geolocation"in navigator)return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(s=>{t({latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,source:"browser"})},s=>{e(s)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})});throw new Error("Geolocation not supported")}const K=X("VoiceRecorder",{web:()=>I(()=>import("./web-970f7b1e.js"),["assets/web-970f7b1e.js","assets/index-ace43089.js","assets/vendor-740be9e2.js","assets/utils-917b1704.js","assets/index-c62130d4.css"]).then(t=>new t.VoiceRecorderWeb)});var ee;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(ee||(ee={}));var ue;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(ue||(ue={}));const $e=X("Filesystem",{web:()=>I(()=>import("./web-fcde7f02.js"),["assets/web-fcde7f02.js","assets/index-ace43089.js","assets/vendor-740be9e2.js","assets/utils-917b1704.js","assets/index-c62130d4.css"]).then(t=>new t.FilesystemWeb)});pe();const De={class:"min-h-screen bg-gray-50"},Ve={class:"bg-white shadow-sm border-b border-gray-200"},Ie={class:"px-4 py-4 flex items-center justify-between"},Fe={class:"px-4 py-6"},qe={key:0,class:"text-center py-8"},Be={key:1,class:"text-center py-8"},Me={key:2},Ge={class:"text-xl font-bold text-gray-900 mb-2"},He={class:"text-gray-600 mb-4"},We={class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={class:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6"},Ke={class:"flex items-center justify-between mb-3"},Je={class:"flex items-center space-x-2"},Ye={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},Xe={key:1,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},Qe={key:2,class:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded"},Ze={class:"space-y-3"},et={class:"flex items-center justify-between"},tt={class:"flex space-x-2"},st={key:0,class:"flex items-center space-x-2"},rt={class:"text-sm text-gray-500"},ot={key:1,class:"space-y-2"},nt={controls:"",class:"w-full"},at=["src"],it={key:2,class:"text-sm text-red-600"},lt={class:"block text-sm font-medium text-gray-700 mb-1"},ct={key:0,class:"text-red-500"},ut={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},dt={class:"text-sm text-red-600"},pt={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-3"},mt={class:"text-sm text-green-700"},vt={key:0,class:"block mt-1 text-xs text-green-600"},ft=["disabled"],gt={key:0},yt={key:1},bt={key:2},ht={__name:"Survey",setup(t){const e=fe(),s=ge(),a=h(null),i=h(!1),n=h(!1),c=h(""),u=h(!1),d=h({}),x=h(null),S=h(!1),p=h(""),m=h(null),O=h({name:"",phone:""}),w=h(!1),v=h(null),E=h(""),H=h(0),C=h("");h(null);const q=h(null),$=h(!1),D=h(!1),te=async()=>{if(!Y.isNativePlatform())return $.value=!0,!0;try{const o=await oe.checkPermissions();return o.location==="granted"||o.location==="prompt"&&(await oe.requestPermissions()).location==="granted"?($.value=!0,!0):(p.value="Location permission denied. Please enable location access in settings.",!1)}catch(o){return console.error("Error requesting location permission:",o),p.value="Could not request location permission.",!1}},B=async()=>{try{return(await K.canDeviceVoiceRecord()).value?(await K.requestAudioRecordingPermission()).value?(D.value=!0,!0):(C.value="Microphone permission denied. Please enable microphone access in settings.",!1):(C.value="This device cannot record audio.",!1)}catch(o){return console.error("VoiceRecorder permission error:",o),C.value="Could not request microphone permission.",!1}},_=async()=>{const o=await te(),r=await B();return{location:o,microphone:r}},P=async()=>{i.value=!0;try{const o=await se.get(`/surveys/${e.params.id}`);if(o.data.success){a.value=o.data.data,d.value={};for(const r of a.value.questions)r.type==="multiple_choice"?d.value[r.id]=[]:d.value[r.id]=""}}catch{a.value=null}finally{i.value=!1}},R=o=>{switch(o.type){case"text":return N(()=>I(()=>import("./TextInput-057e0d7d.js"),["assets/TextInput-057e0d7d.js","assets/vendor-740be9e2.js"]));case"number":return N(()=>I(()=>import("./NumberInput-956f52df.js"),["assets/NumberInput-956f52df.js","assets/vendor-740be9e2.js"]));case"single_choice":return N(()=>I(()=>import("./RadioInput-38bc2e82.js"),["assets/RadioInput-38bc2e82.js","assets/vendor-740be9e2.js"]));case"multiple_choice":return N(()=>I(()=>import("./CheckboxInput-f1d0735b.js"),["assets/CheckboxInput-f1d0735b.js","assets/vendor-740be9e2.js"]));case"select":case"rating":return N(()=>I(()=>import("./SelectInput-380f6450.js"),["assets/SelectInput-380f6450.js","assets/vendor-740be9e2.js"]));default:return N(()=>I(()=>import("./TextInput-057e0d7d.js"),["assets/TextInput-057e0d7d.js","assets/vendor-740be9e2.js"]))}},j=async()=>{if(S.value=!0,p.value="",!$.value){p.value="Location permission not granted. Please grant location permission first.",S.value=!1;return}try{const o=await ce();if(x.value=o,o.latitude&&o.longitude)try{const L=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${o.latitude}&lon=${o.longitude}&zoom=18&addressdetails=1`)).json();L.display_name&&(x.value.address=L.display_name)}catch{}S.value=!1}catch(o){p.value=o.message||"Could not get location.",S.value=!1}},T=async()=>{try{if(C.value="",!D.value){C.value="Microphone permission not granted. Please grant microphone permission first.";return}(await K.startRecording({directory:ee.Data,subDirectory:"recordings"})).value?(w.value=!0,H.value=0,q.value=setInterval(()=>{H.value++},1e3)):C.value="Failed to start recording."}catch(o){console.error("Recording error:",o),C.value="Could not start recording: "+o.message}},k=async()=>{if(w.value)try{const o=await K.stopRecording();if(w.value=!1,clearInterval(q.value),o&&(o.value.recordDataBase64||o.value.path)){if(o.value.path)try{const r=await $e.readFile({directory:ee.Data,path:o.value.path}),L=atob(r.data),b=new Array(L.length);for(let V=0;V<L.length;V++)b[V]=L.charCodeAt(V);const U=new Uint8Array(b);v.value=new Blob([U],{type:o.value.mimeType||"audio/aac"}),E.value=URL.createObjectURL(v.value)}catch(r){console.error("Error reading audio file:",r),C.value="Error reading recorded audio file."}else if(o.value.recordDataBase64){const r=atob(o.value.recordDataBase64),L=new Array(r.length);for(let U=0;U<r.length;U++)L[U]=r.charCodeAt(U);const b=new Uint8Array(L);v.value=new Blob([b],{type:o.value.mimeType||"audio/aac"}),E.value=URL.createObjectURL(v.value)}}else console.error("No recording data returned"),C.value="Recording failed - no data received."}catch(o){console.error("Error stopping recording:",o),C.value="Error stopping recording: "+o.message,w.value=!1,clearInterval(q.value)}},W=()=>{v.value=null,E.value="",H.value=0,C.value=""},z=()=>{var o,r;console.log("Audio blob info:",{exists:!!v.value,size:(o=v.value)==null?void 0:o.size,type:(r=v.value)==null?void 0:r.type,url:E.value})},me=()=>{console.log("VoiceRecorder methods:",Object.getOwnPropertyNames(K)),console.log("VoiceRecorder prototype:",Object.getOwnPropertyNames(Object.getPrototypeOf(K)))},ve=async()=>{var o,r,L,b,U;c.value="",u.value=!1,n.value=!0;try{for(const y of a.value.questions)if(y.required&&(!d.value[y.id]||Array.isArray(d.value[y.id])&&d.value[y.id].length===0)){c.value=`Please answer: ${y.text}`,n.value=!1;return}if(m.value=x.value,$.value)try{console.log("Getting fresh GPS coordinates for submission...");const y=await ce();if(m.value=y,y.latitude&&y.longitude)try{const M=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${y.latitude}&lon=${y.longitude}&zoom=18&addressdetails=1`)).json();M.display_name&&(m.value.address=M.display_name)}catch{}}catch(y){console.error("Error getting fresh location:",y)}const V={survey_id:a.value.id,respondent_name:O.value.name,respondent_phone:O.value.phone,latitude:((o=m.value)==null?void 0:o.latitude)||null,longitude:((r=m.value)==null?void 0:r.longitude)||null,location_address:((L=m.value)==null?void 0:L.address)||null,answers:Object.entries(d.value).map(([y,F])=>({question_id:y,value:Array.isArray(F)?JSON.stringify(F):F}))};if(z(),v.value){const y=new FormData;if(Object.entries(V).forEach(([M,Q])=>{Array.isArray(Q)||typeof Q=="object"?y.append(M,JSON.stringify(Q)):y.append(M,Q)}),v.value){const M=v.value.type.includes("aac")?"aac":v.value.type.includes("webm")?"webm":v.value.type.includes("mp4")?"mp4":"wav";y.append("voice_recording",v.value,`voice_response.${M}`)}else console.error("No audio blob available for submission");const F=await se.post("/responses/submit",y,{headers:{"Content-Type":"multipart/form-data"}});F.data.success?(u.value=!0,c.value="",setTimeout(()=>{window.location.reload()},5e3)):c.value=F.data.message||"Failed to submit response."}else{const y=await se.post("/responses/submit",V);y.data.success?(u.value=!0,c.value="",setTimeout(()=>{window.location.reload()},5e3)):c.value=y.data.message||"Failed to submit response."}}catch(V){c.value=((U=(b=V.response)==null?void 0:b.data)==null?void 0:U.message)||"Failed to submit response."}finally{n.value=!1}};return ye(async()=>{P(),Y.isNativePlatform()&&me(),(await _()).location&&j()}),(o,r)=>{var L;return f(),g("div",De,[l("header",Ve,[l("div",Ie,[r[3]||(r[3]=l("h1",{class:"text-lg font-semibold text-gray-900"},"Survey",-1)),l("button",{onClick:r[0]||(r[0]=b=>be(s).back()),class:"btn btn-secondary text-sm"},"Back")])]),l("main",Fe,[i.value?(f(),g("div",qe,r[4]||(r[4]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"},null,-1),l("p",{class:"mt-2 text-sm text-gray-600"},"Loading survey...",-1)]))):a.value?(f(),g("div",Me,[l("h2",Ge,G(a.value.title),1),l("p",He,G(a.value.description),1),l("div",We,[r[8]||(r[8]=l("h3",{class:"text-sm font-medium text-green-900 mb-3"},"Respondent Information",-1)),l("div",ze,[l("div",null,[r[6]||(r[6]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Respondent Name",-1)),ne(l("input",{"onUpdate:modelValue":r[1]||(r[1]=b=>O.value.name=b),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter respondent's name"},null,512),[[ae,O.value.name]])]),l("div",null,[r[7]||(r[7]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number",-1)),ne(l("input",{"onUpdate:modelValue":r[2]||(r[2]=b=>O.value.phone=b),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter phone number"},null,512),[[ae,O.value.phone]])])])]),l("div",Ne,[l("div",Ke,[r[9]||(r[9]=l("h3",{class:"text-sm font-medium text-purple-900"},"Voice Response",-1)),l("div",Je,[$.value?(f(),g("div",Ye," ✓ Location Access ")):A("",!0),D.value?(f(),g("div",Xe," ✓ Microphone Access ")):(f(),g("div",Qe," ✗ Microphone Access "))])]),l("div",Ze,[l("div",et,[r[10]||(r[10]=l("span",{class:"text-sm text-gray-600"},"Record voice response",-1)),l("div",tt,[!w.value&&!v.value&&D.value?(f(),g("button",{key:0,onClick:T,type:"button",class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm transition-colors"}," Start Recording ")):A("",!0),!w.value&&!v.value&&!D.value?(f(),g("button",{key:1,onClick:B,type:"button",class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm transition-colors"}," Grant Microphone Permission ")):A("",!0),w.value?(f(),g("button",{key:2,onClick:k,type:"button",class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm transition-colors"}," Stop Recording ")):A("",!0),v.value&&!w.value?(f(),g("button",{key:3,onClick:T,type:"button",class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm transition-colors"}," Re-record ")):A("",!0)])]),w.value?(f(),g("div",st,[r[11]||(r[11]=l("div",{class:"animate-pulse w-3 h-3 bg-red-500 rounded-full"},null,-1)),r[12]||(r[12]=l("span",{class:"text-sm text-red-600"},"Recording...",-1)),l("span",rt,"("+G(H.value)+"s)",1)])):A("",!0),v.value&&!w.value?(f(),g("div",ot,[l("audio",nt,[l("source",{src:E.value,type:"audio/wav"},null,8,at),r[13]||(r[13]=Z(" Your browser does not support the audio element. "))]),l("button",{onClick:W,type:"button",class:"text-sm text-red-600 hover:text-red-700"}," Clear recording ")])):A("",!0),C.value?(f(),g("div",it,[Z(G(C.value)+" ",1),D.value?A("",!0):(f(),g("button",{key:0,onClick:B,class:"ml-2 text-purple-600 hover:text-purple-700 underline"}," Grant Permission "))])):A("",!0)])]),l("form",{onSubmit:he(ve,["prevent"]),class:"space-y-6"},[(f(!0),g(we,null,_e(a.value.questions,b=>(f(),g("div",{key:b.id,class:"mb-4"},[l("label",lt,[Z(G(b.text)+" ",1),b.required?(f(),g("span",ct,"*")):A("",!0)]),(f(),xe(Pe(R(b)),{modelValue:d.value[b.id],"onUpdate:modelValue":U=>d.value[b.id]=U,question:b},null,8,["modelValue","onUpdate:modelValue","question"]))]))),128)),c.value?(f(),g("div",ut,[l("p",dt,G(c.value),1)])):A("",!0),u.value?(f(),g("div",pt,[l("p",mt,[r[14]||(r[14]=Z(" Response submitted successfully! ")),(L=m.value)!=null&&L.address?(f(),g("span",vt," Location: "+G(m.value.address),1)):A("",!0)])])):A("",!0),l("button",{type:"submit",class:"w-full btn btn-primary",disabled:n.value},[n.value?(f(),g("span",gt,"Submitting...")):u.value?(f(),g("span",yt,"Next Response")):(f(),g("span",bt,"Submit Response"))],8,ft)],32)])):(f(),g("div",Be,r[5]||(r[5]=[l("p",{class:"text-gray-600"},"Survey not found",-1)])))])])}}},xt=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{Y as C,ue as E,$e as F,xt as S,de as W,Te as b,X as r};
